apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: alchemist-tower-route
  namespace: $(NAMESPACE)
spec:
  entryPoints:
    - websecure
  routes:
    - match: Host(`$(DOMAIN)`) && PathPrefix(`$(PATH_PREFIX)`)
      kind: Rule
      middlewares:
        - name: strip-prefix-$(APP_NAME)
          namespace: $(NAMESPACE)
      services:
        - name: $(APP_NAME)
          port: $(PORT)
  tls:
    secretName: numinia-tls