apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: "alchemist-tower-route"
  namespace: numinia
spec:
  entryPoints:
    - websecure
  routes:
    - match: Host(`${DOMAIN}`) && PathPrefix(`${PATH_PREFIX}`)
      kind: Rule
      middlewares:
        - name: "${WORLD_NAME}-strip-prefix"
          namespace: numinia
      services:
        - name: "${WORLD_NAME}"
          port: "${PORT}"
  tls:
    secretName: numinia-tls